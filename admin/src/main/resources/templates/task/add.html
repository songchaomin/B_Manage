<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:mo="https://gitee.com/aun/Timo">
<head th:replace="/common/template :: header(~{::title},~{::link},~{::style})">
    <style>
        .layui-form .layui-form-item .layui-form-label {
            width: 140px;
        }

        .upload-img {
            width: 80px;
            height: 80px;
            border: 0;
            padding-right: 2px;
        }
    </style>
</head>
<body>
<div class="layui-form timo-compile" style="margin: 0 auto;width: 700px;padding-top: 5px;">
    <form th:action="@{/task/add}">
        <div class="layui-tab layui-tab-card">
            <ul class="layui-tab-title">
                <li class="layui-this">任务基本信息</li>
                <li>任务标签</li>
            </ul>
            <div class="layui-tab-content" style="background-color: white;">
                <div class="layui-tab-item layui-show">
                    <!--基本信息-->
                    <div class="layui-form-item">
                        <label class="layui-form-label required">任务名称</label>
                        <div class="layui-input-inline">
                            <input class="layui-input" type="text" name="taskName" placeholder="请输入任务名称">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label required">任务类型</label>
                        <div class="layui-input-inline">
                            <input type="radio" name="taskType" value="淘宝" title="淘宝" >
                            <input type="radio" name="taskType" value="京东" title="京东">
                            <input type="radio" name="taskType" value="拼多多" title="拼多多">
                            <input type="radio" name="taskType" value="抖音" title="抖音">

                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label required">绑定店铺</label>
                        <div class="layui-input-inline">
                            <input class="layui-input" type="text" name="shopName" placeholder="请选择店铺">
                        </div>
                        <div class="layui-input-inline">
                            <button type="button" class="layui-btn" id="chsShop">选择店铺</button>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label required">宝贝链接</label>
                        <div class="layui-input-inline">
                            <input class="layui-input" type="text" name="babyLink" placeholder="请输入宝贝链接">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label required">宝贝关键字</label>
                        <div class="layui-input-inline">
                            <input class="layui-input" type="text" name="babyKey" placeholder="请输入宝贝关键字">
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label required">宝贝规格(毛重)</label>
                        <div class="layui-input-inline">
                            <input class="layui-input" type="text" name="babySpec" placeholder="请输入宝贝规格">
                        </div>
                        <div class="layui-input-inline">
                           <span>克</span>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label required">宝贝本金(元)</label>
                        <div class="layui-input-inline">
                            <input class="layui-input" type="text" name="babyPrice" placeholder="请输入宝贝本金">
                        </div>

                        <div class="layui-input-inline">
                            <button type="button" class="layui-btn" id="chsPrice">服务价目表</button>
                        </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label required">是否关注店铺</label>
                        <div class="layui-input-inline">
                            <input type="radio" name="attentionStoreFlag" value="1" title="是" >
                            <input type="radio" name="attentionStoreFlag" value="0" title="否">
                        </div>
                    </div>

                    <div class="layui-form-item">
                        <label class="layui-form-label required">是否收藏宝贝</label>
                        <div class="layui-input-inline">
                            <input type="radio" name="collectBabyFlag" value="1" title="是" >
                            <input type="radio" name="collectBabyFlag" value="0" title="否">
                        </div>
                    </div>
                    <div class="layui-form-item">
                    <div class="layui-upload">
                        <label class="layui-form-label required">宝贝主图</label>
                        <div class="layui-input-inline">
                            <button type="button" class="layui-btn" id="babyPic">上传图片</button>
                            <blockquote style="margin-top: 5px;">
                                <div class="layui-upload-list" id="babyPicImg"></div>
                            </blockquote>
                            <input type="hidden" name="babyPic" id="babyPicText"/>
                        </div>
                    </div>
                    </div>
                    <div class="layui-form-item">
                        <label class="layui-form-label required">任务人数</label>
                        <div class="layui-input-inline">
                            <input class="layui-input" type="text" name="babyKey" placeholder="请输入任务人数">
                        </div>
                        <div class="layui-input-inline">
                            <span>【不可为0】</span>
                        </div>
                    </div>
                </div>
                <div class="layui-tab-item">
                    <!--资质信息-->
                    <div class="layui-upload">
                        <button type="button" class="layui-btn" id="idCardPic">上传身份证</button>
                        <blockquote style="margin-top: 5px;">
                            <div class="layui-upload-list" id="idCardPicImg"></div>
                        </blockquote>
                        <input type="hidden" name="idCardPic" id="idCardUploadText"/>
                    </div>
                    <div class="layui-upload">
                        <button type="button" class="layui-btn" id="bankCardPic">上传银行卡</button>
                        <blockquote style="margin-top: 5px;">
                            <div class="layui-upload-list" id="bankCardPicImg"></div>
                        </blockquote>
                        <input type="hidden" name="bankCardPic" id="bankCardPicText"/>
                    </div>
                    <div class="layui-upload">
                        <button type="button" class="layui-btn" id="payPic">上传支付宝</button>
                        <blockquote style="margin-top: 5px;">
                            <div class="layui-upload-list" id="payPicImg"></div>
                        </blockquote>
                        <input type="hidden" name="payPic" id="payPicText"/>
                    </div>
                    <div class="layui-upload">
                        <button type="button" class="layui-btn" id="taobaoPic">上传淘宝号</button>
                        <blockquote style="margin-top: 5px;">
                            <div class="layui-upload-list" id="taobaoPicImg"></div>
                        </blockquote>
                        <input type="hidden" name="taobaoPic" id="taobaoPicText"/>
                    </div>
                    <div class="layui-upload">
                        <button type="button" class="layui-btn" id="shppingXyPic">上传买家信誉</button>
                        <blockquote style="margin-top: 5px;">
                            <div class="layui-upload-list" id="shppingXyPicImg"></div>
                        </blockquote>
                        <input type="hidden" name="shppingXyPic" id="shppingXyPicText"/>
                    </div>
                    <!--资质信息结束-->
                </div>

            </div>
        </div>
        <div class="layui-form-item" style="padding-left: 10px;">
            <button class="layui-btn task-submit"><i class="fa fa-check-circle"></i> 保存</button>
            <button class="layui-btn btn-secondary close-popup"><i class="fa fa-times-circle"></i> 关闭</button>
        </div>
    </form>
</div>
<script th:replace="/common/template :: script"></script>
<script>
    layui.use(['layer'], function () {
        var $ = layui.jquery;
        var layer = layui.layer;
        $("#chs").click(function () {
            window.layerIndex = layer.open({
                content: ['/system/user/userlistinfo', 2]
                , type: 2
                , title: '用户列表'
                , area: ['600px', '400px']
            });
        });

        /* 提交表单数据 */
        $(document).on("click", ".task-submit", function (e) {
            e.preventDefault();
            var form = $(this).parents("form");
            var url = form.attr("action");
            var serializeArray = form.serializeArray();
            $.post(url, serializeArray, function (result) {
                if (result.data == null) {
                    result.data = 'submit[refresh]';
                }
                if (result.code === 200) {
                    layer.msg(result.msg, {offset: '15px', time: 3000, icon: 1});
                    setTimeout(function () {
                        if (result.data === 'submit[refresh]') {
                            parent.location.reload();
                            return;
                        }
                        if (result.data != null && result.data.url != null) {
                            window.location.href = result.data.url;
                        } else {
                            window.location.reload();
                        }
                    }, 2000);
                } else {
                    layer.msg(result.msg, {offset: '15px', time: 3000, icon: 2});
                }
            });
        });
    });


</script>
</body>
</html>